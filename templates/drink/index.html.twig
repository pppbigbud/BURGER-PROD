{% extends 'base.html.twig' %}

{% block title %}ü•§ Drinks ü•§{% endblock %}

{% block main %}
    <div class="container">

    <div class="alignementBackground">
    <div class="titreTacosAlignement">
        <h1 class="titreTacos text-white">BOISSONS</h1>
        <p class="descriptionTacos mt-2 mb-5 text-muted text-center">
            Accompagnez votre repas avec notre s√©lection de <i class="fa-solid fa-martini-glass-citrus"></i>
            <strong class="text-white opacity-50"> boissons rafra√Æchissantes</strong> dans notre nouveau
            fast-food √† <i class="fa-solid fa-location-dot"></i><strong class="text-white opacity-50"> Saint-Remy sur Durolle</strong>.
            Nous proposons une vari√©t√© de boissons classiques comme le Coca-Cola,
            l'Orangina et bien d'autres, pour compl√©ter votre repas avec une note de fra√Æcheur.
            <strong class="text-white opacity-50">Nous vous proposons
            √©galement nos fameuses frites maison</strong> pour une exp√©rience gustative compl√®te</p>

        <div class="row row-cols-1 row-cols-md-4 d-flex justify-content-center ">
            {% for drink in drinks %}
                {% include('partials/_cardsDrink.html.twig') %}
            {% endfor %}
        </div>
    </div>


    <script>
        // Au chargement de la page je charge ma fonction
        window.addEventListener('load', () => {
            setUpClickEventAddItemDrink();
        });

        //fonctions quand je clic
        function setUpClickEventAddItemDrink() {
            //√âcoute element grace √† un data-attribute
            //(et par s√©curit√© pour √©viter les injections)
            let addToCartDrinkBTN = document.querySelectorAll('[data-add-drink-cart]');
            //Boucle sur le tableau data-attribute
            addToCartDrinkBTN.forEach(btn => {
                btn.addEventListener('click', function () {
                    const drinkID = btn.getAttribute('data-add-drink-cart');

                    const data = {
                        drinkID,
                    };

                    flasher.success("Votre Drink √† bien √©t√© ajout√©!")

                    fetch('/addDrinkToCart/' + JSON.stringify(data))
                        .then((response) => {
                            return response.json();
                        })
                    // .then(res => {
                    //     const burgerCart = document.querySelector("[data-cart-burger]");
                    //
                    //     const newQty = parseInt(res.newQty);
                    //     burgerCart.classList.toggle('d-none', newQty === 0);
                    //
                    //     const rondQtyBurger = burgerCart.querySelector('.rondPriceBurger');
                    //     rondQtyBurger.innerText = newQty;
                    // })
                })
            })
        }
    </script>

{% endblock %}