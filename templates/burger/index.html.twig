{% extends 'base.html.twig' %}

{% block title %}üçî BURGERS üçî{% endblock %}

{% block main %}
    <div class="titreBurgerCentrage">
        <h1 class="titreBurger text-white">BURGERS</h1>
        <p class="descriptionTacos mt-2 mb-5 text-muted text-center w-75">Venez d√©guster nos savoureux <i class="fa-solid fa-burger"></i><strong class="text-white opacity-50"> burgers faits maison</strong> √†
            partir de <i class="fa-solid fa-drumstick-bite"></i><strong class="text-white opacity-50"> viandes fran√ßaises</strong> et avec
            <br>
            des <i class="fa-solid fa-cheese"></i><strong class="text-white opacity-50"> fromages locaux d'Auvergne</strong>
            dans votre nouveau fast-food √† <i class="fa-solid fa-location-dot"></i><strong class="text-white opacity-50"> Saint-Remy sur Durolle</strong>. Nous vous proposons une vari√©t√© de burgers succulents pour tous les
            go√ªts, avec une option v√©g√©tarienne disponible pour les non-carnivores. Tous nos burgers sont servis sur des
            <i class="fa-solid fa-bread-slice"></i><strong class="text-white opacity-50"> pains frais, faits maison</strong> pour une exp√©rience gustative unique.</p>
    </div>

    <div class="container d-flex flex-column">

        {#        <div class="responsiveDnone"> #}
        {#            <div class="alignementBackground"> #}
        {#                <div class="titreBurgerAlignement w-100"> #}
        {#                    <h1 class="titreBurger">BURGERS</h1> #}
        {#                    <h3 class="text-muted text-center txtRespBurger">Retrouvez ici l'ensemble de nos Burgers fait minute et maison avec des produits selectionn√©s avec soin avec leurs pains fait maison. A d√©guster sans mod√©ration .</h3> #}
        {#                </div> #}
        {#            </div> #}
        {#        </div> #}

        <div class="row d-flex justify-content-center">

            {% for burger in burgers %}
                {% include('partials/_cardsBurger.html.twig') %}
            {% endfor %}

        </div>

    </div>

    <script>
        // Au chargement de la page je charge ma fonction
        window.addEventListener('load', () => {
            setUpClickEventAddItem();
        });

        //fonctions quand je clic
        function setUpClickEventAddItem() {
            //√âcoute element grace √† un data-attribute
            //(et par s√©curit√© pour √©viter les injections)
            let addToCartBTN = document.querySelectorAll('[data-add-burger-cart]');
            //Boucle sur le tableau data-attribute
            addToCartBTN.forEach(btn => {
                btn.addEventListener('click', function () {
                    const burgerId = btn.getAttribute('data-add-burger-cart');
                    const isChecked = document.querySelector("[data-add-frie='" + burgerId + "']").checked;

                    const data = {
                        burgerId,
                        'fries': isChecked,
                    };

                    flasher.success("Votre Burger √† bien √©t√© ajout√©!")

                    fetch('/addBurgerToCart/' + JSON.stringify(data))
                        .then((response) => {
                            return response.json();
                        })
                        .then(res => {
                            const burgerCart = document.querySelector("[data-cart-burger]");

                            const newQty = parseInt(res.newQty);
                            burgerCart.classList.toggle('d-none', newQty === 0);

                            const rondQtyBurger = burgerCart.querySelector('.rondPriceBurger');
                            rondQtyBurger.innerText = newQty;
                        })
                })
            })
        }
    </script>

{% endblock %}
